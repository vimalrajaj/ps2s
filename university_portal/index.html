<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>University Administration Portal</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style-enhanced.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-university"></i>
                    <h3>University Portal</h3>
                </div>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item active">
                        <a href="#dashboard" class="nav-link" data-section="dashboard">
                            <i class="fas fa-chart-pie"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#create-student" class="nav-link" data-section="create-student">
                            <i class="fas fa-user-plus"></i>
                            <span>Create Student</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#create-faculty" class="nav-link" data-section="create-faculty">
                            <i class="fas fa-chalkboard-teacher"></i>
                            <span>Create Faculty</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#departments" class="nav-link" data-section="departments">
                            <i class="fas fa-building"></i>
                            <span>Departments</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#faculty-list" class="nav-link" data-section="faculty-list">
                            <i class="fas fa-users"></i>
                            <span>Faculty List</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#assign-mentor" class="nav-link" data-section="assign-mentor">
                            <i class="fas fa-user-tie"></i>
                            <span>Assign Mentors</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <button class="btn btn-outline-light btn-sm" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Enhanced Header -->
            <header class="main-header">
                <div class="header-content">
                    <div class="header-left">
                        <button class="mobile-toggle">
                            <i class="fas fa-bars"></i>
                        </button>
                        <h1 class="page-title" id="pageTitle">Dashboard</h1>
                    </div>
                    <div class="header-actions">
                        <button class="refresh-btn" onclick="refreshData()">
                            <i class="fas fa-sync-alt"></i>
                            Refresh
                        </button>
                        <div class="user-info">
                            <div class="user-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="user-details">
                                <span id="welcomeMessage">Administrator</span>
                                <small>University Admin</small>
                            </div>
                            <button class="btn btn-outline-danger btn-sm ms-2" onclick="logout()">
                                <i class="fas fa-sign-out-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <div class="stats-cards">
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="stats-content">
                            <h3 id="totalStudents">0</h3>
                            <p>Total Students</p>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fas fa-chalkboard-teacher"></i>
                        </div>
                        <div class="stats-content">
                            <h3 id="totalFaculty">0</h3>
                            <p>Total Faculty</p>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="stats-content">
                            <h3 id="totalDepartments">0</h3>
                            <p>Departments</p>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="stats-content">
                            <h3 id="totalCourses">0</h3>
                            <p>Courses</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-content">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header">
                                    <h5>Department-wise Statistics</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="departmentChart"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5>Quick Actions</h5>
                                </div>
                                <div class="card-body">
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-primary" onclick="showSection('create-student')">
                                            <i class="fas fa-user-plus"></i> Add Student
                                        </button>
                                        <button class="btn btn-success" onclick="showSection('create-faculty')">
                                            <i class="fas fa-chalkboard-teacher"></i> Add Faculty
                                        </button>
                                        <button class="btn btn-info" onclick="showSection('assign-mentor')">
                                            <i class="fas fa-user-tie"></i> Assign Mentors
                                        </button>
                                        <button class="btn btn-warning" onclick="refreshData()">
                                            <i class="fas fa-sync-alt"></i> Refresh Data
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Create Student Section -->
            <section id="create-student" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <h5>Create New Student Account</h5>
                    </div>
                    <div class="card-body">
                        <form id="studentForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6 class="text-primary">Personal Information</h6>
                                    <div class="mb-3">
                                        <label for="registerNumber" class="form-label">Register Number *</label>
                                        <input type="text" class="form-control" id="registerNumber" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="firstName" class="form-label">First Name *</label>
                                        <input type="text" class="form-control" id="firstName" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="lastName" class="form-label">Last Name *</label>
                                        <input type="text" class="form-control" id="lastName" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="email" class="form-label">Email *</label>
                                        <input type="email" class="form-control" id="email" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="phone" class="form-label">Phone</label>
                                        <input type="tel" class="form-control" id="phone">
                                    </div>
                                    <div class="mb-3">
                                        <label for="dateOfBirth" class="form-label">Date of Birth *</label>
                                        <input type="date" class="form-control" id="dateOfBirth" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="gender" class="form-label">Gender *</label>
                                        <select class="form-control" id="gender" required>
                                            <option value="">Select Gender</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="text-primary">Academic Information</h6>
                                    <div class="mb-3">
                                        <label for="department" class="form-label">Department *</label>
                                        <select class="form-control" id="department" required>
                                            <option value="">Select Department</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="academicYear" class="form-label">Academic Year</label>
                                        <input type="text" class="form-control" id="academicYear" placeholder="e.g., 2024-2025" value="2024-2025">
                                    </div>
                                    <div class="mb-3">
                                        <label for="currentSemester" class="form-label">Current Semester</label>
                                        <input type="number" class="form-control" id="currentSemester" value="1" min="1" max="8">
                                    </div>
                                    <div class="mb-3">
                                        <label for="currentYear" class="form-label">Current Year</label>
                                        <input type="number" class="form-control" id="currentYear" value="1" min="1" max="4">
                                    </div>
                                    <div class="mb-3">
                                        <label for="password" class="form-label">Password (Optional - Register Number will be used if empty)</label>
                                        <input type="password" class="form-control" id="password">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <h6 class="text-primary">Parent/Guardian Information</h6>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="mb-3">
                                                <label for="parentName" class="form-label">Parent/Guardian Name</label>
                                                <input type="text" class="form-control" id="parentName">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="mb-3">
                                                <label for="parentPhone" class="form-label">Parent Phone</label>
                                                <input type="tel" class="form-control" id="parentPhone">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="mb-3">
                                                <label for="parentEmail" class="form-label">Parent Email</label>
                                                <input type="email" class="form-control" id="parentEmail">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="address" class="form-label">Address</label>
                                        <textarea class="form-control" id="address" rows="3"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="text-end">
                                <button type="button" class="btn btn-secondary me-2" onclick="resetStudentForm()">Reset</button>
                                <button type="submit" class="btn btn-primary">Create Student Account</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Create Faculty Section -->
            <section id="create-faculty" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <h5>Create New Faculty Account</h5>
                    </div>
                    <div class="card-body">
                        <form id="facultyForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6 class="text-primary">Personal Information</h6>
                                    <div class="mb-3">
                                        <label for="facultyCode" class="form-label">Faculty ID/Code *</label>
                                        <input type="text" class="form-control" id="facultyCode" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="facultyFirstName" class="form-label">First Name *</label>
                                        <input type="text" class="form-control" id="facultyFirstName" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="facultyLastName" class="form-label">Last Name *</label>
                                        <input type="text" class="form-control" id="facultyLastName" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="facultyEmail" class="form-label">Email *</label>
                                        <input type="email" class="form-control" id="facultyEmail" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="facultyPhone" class="form-label">Phone</label>
                                        <input type="tel" class="form-control" id="facultyPhone">
                                    </div>
                                    <div class="mb-3">
                                        <label for="facultyDOB" class="form-label">Date of Birth</label>
                                        <input type="date" class="form-control" id="facultyDOB">
                                    </div>
                                    <div class="mb-3">
                                        <label for="facultyGender" class="form-label">Gender</label>
                                        <select class="form-control" id="facultyGender">
                                            <option value="">Select Gender</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="text-primary">Professional Information</h6>
                                    <div class="mb-3">
                                        <label for="facultyDepartment" class="form-label">Department *</label>
                                        <select class="form-control" id="facultyDepartment" required>
                                            <option value="">Select Department</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="designation" class="form-label">Role/Designation *</label>
                                        <select class="form-control" id="designation" required>
                                            <option value="">Select Role/Designation</option>
                                            <option value="Professor">Professor</option>
                                            <option value="Associate Professor">Associate Professor</option>
                                            <option value="Assistant Professor">Assistant Professor</option>
                                            <option value="HOD">Head of Department (HOD)</option>
                                            <option value="Dean">Dean</option>
                                            <option value="Principal">Principal</option>
                                            <option value="Vice Principal">Vice Principal</option>
                                            <option value="Lecturer">Lecturer</option>
                                            <option value="Senior Lecturer">Senior Lecturer</option>
                                            <option value="Research Supervisor">Research Supervisor</option>
                                            <option value="Lab Instructor">Lab Instructor</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="qualification" class="form-label">Qualification</label>
                                        <input type="text" class="form-control" id="qualification" placeholder="e.g., Ph.D., M.Tech., M.Sc.">
                                    </div>
                                    <div class="mb-3">
                                        <label for="experience" class="form-label">Experience (Years)</label>
                                        <input type="number" class="form-control" id="experience" min="0" max="50">
                                    </div>
                                    <div class="mb-3">
                                        <label for="joiningDate" class="form-label">Date of Joining</label>
                                        <input type="date" class="form-control" id="joiningDate">
                                    </div>
                                    <div class="mb-3">
                                        <label for="facultyPassword" class="form-label">Password (Optional - Faculty Code will be used if empty)</label>
                                        <input type="password" class="form-control" id="facultyPassword">
                                    </div>
                                </div>
                            </div>
                            <div class="text-end">
                                <button type="button" class="btn btn-secondary me-2" onclick="resetFacultyForm()">Reset</button>
                                <button type="submit" class="btn btn-primary">Create Faculty Account</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Departments Section -->
            <section id="departments" class="content-section">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">
                                <h5>Create New Department</h5>
                                <button class="btn btn-sm btn-outline-danger float-end" onclick="clearAllDepartments()">
                                    <i class="fas fa-trash"></i> Clear All Departments
                                </button>
                            </div>
                            <div class="card-body">
                                <form id="departmentForm">
                                    <div class="mb-3">
                                        <label for="deptCode" class="form-label">Department Code *</label>
                                        <input type="text" class="form-control" id="deptCode" required maxlength="10" placeholder="e.g., CSE, ECE">
                                    </div>
                                    <div class="mb-3">
                                        <label for="deptName" class="form-label">Department Name *</label>
                                        <input type="text" class="form-control" id="deptName" required placeholder="e.g., Computer Science & Engineering">
                                    </div>
                                    <div class="mb-3">
                                        <label for="establishedYear" class="form-label">Established Year</label>
                                        <input type="number" class="form-control" id="establishedYear" min="1900" max="2030" value="2024">
                                    </div>
                                    <div class="text-end">
                                        <button type="button" class="btn btn-secondary me-2" onclick="resetDepartmentForm()">Reset</button>
                                        <button type="submit" class="btn btn-primary">Create Department</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header">
                                <h5>Department Structure</h5>
                                <button class="btn btn-sm btn-outline-primary float-end" onclick="loadDepartments()">
                                    <i class="fas fa-refresh"></i> Refresh
                                </button>
                            </div>
                            <div class="card-body">
                                <div id="departmentTree">
                                    <!-- Dynamic content will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Faculty List Section -->
            <section id="faculty-list" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <h5>Faculty Management</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Faculty ID</th>
                                        <th>Name</th>
                                        <th>Department</th>
                                        <th>Designation</th>
                                        <th>Email</th>
                                        <th>Mentor Class</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="facultyTableBody">
                                    <!-- Dynamic content will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Assign Mentor Section -->
            <section id="assign-mentor" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <h5>Assign Faculty as Class Mentor</h5>
                    </div>
                    <div class="card-body">
                        <form id="mentorAssignForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="selectFaculty" class="form-label">Select Faculty *</label>
                                        <select class="form-control" id="selectFaculty" required>
                                            <option value="">Choose Faculty Member</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="selectClass" class="form-label">Select Class *</label>
                                        <select class="form-control" id="selectClass" required>
                                            <option value="">Choose Class</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="text-end">
                                <button type="submit" class="btn btn-primary">Assign Mentor</button>
                            </div>
                        </form>
                        
                        <hr>
                        
                        <h6>Current Mentor Assignments</h6>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Class</th>
                                        <th>Course</th>
                                        <th>Mentor</th>
                                        <th>Department</th>
                                        <th>Students</th>
                                    </tr>
                                </thead>
                                <tbody id="mentorAssignmentsTable">
                                    <!-- Dynamic content will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner" style="display: none;">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <!-- Department Details Modal -->
    <div class="modal fade" id="departmentDetailsModal" tabindex="-1" aria-labelledby="departmentDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="departmentDetailsModalLabel">Department Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="departmentDetailsContent">
                        <!-- Dynamic content will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Academic Year Classes Modal -->
    <div class="modal fade" id="academicYearModal" tabindex="-1" aria-labelledby="academicYearModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="academicYearModalLabel">Classes in Academic Year</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="academicYearContent">
                        <!-- Dynamic content will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Class Students Modal -->
    <div class="modal fade" id="classStudentsModal" tabindex="-1" aria-labelledby="classStudentsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="classStudentsModalLabel">Students in Class</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="classStudentsContent">
                        <!-- Dynamic content will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Custom JS -->
    <script src="script.js"></script>
</body>
</html>